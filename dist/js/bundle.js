(()=>{"use strict";var t,e="toToStorage",r=function(){function t(t){this.id=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),this.text=t||"Новый проект",this.isDone=!1}return t.prototype.toggleStatus=function(){this.isDone=!this.isDone},t.prototype.changeText=function(t){this.text=t},t.prototype.update=function(t){return this.id=t.id,this.text=t.text,this.isDone=t.isDone,this},t}();!function(t){t.setItem=function(t,e){localStorage.setItem(t,JSON.stringify(e))},t.getItem=function(t){return JSON.parse(localStorage.getItem(t))},t.removeItem=function(t){this.contains(t)&&localStorage.removeItem(t)},t.contains=function(t){return!!localStorage.getItem(t)},t.clear=function(){localStorage.clear()}}(t||(t={}));var o=function(){function o(){var o=this;this.storage=[];var n=t.getItem(e);n&&n.length&&n.forEach((function(t){o.storage.push((new r).update(t))}))}return o.getInstance=function(){return o.instance||(o.instance=new o),o.instance},o.prototype.search=function(t){return t.length?this.storage.filter((function(e){return e.text.toLowerCase().indexOf(t.toLowerCase())>=0})):this.storage},o.prototype.get=function(t){return this.storage.find((function(e){return e.id===t}))},o.prototype.add=function(t){var e=new r(t);return this.storage.unshift(e),e.id},o.prototype.replace=function(t){this.storage.map((function(e){return e.id===t.id?t:e}))},o.prototype.remove=function(t){this.storage=this.storage.filter((function(e){return e.id!==t}))},o.prototype.getStorage=function(){return this.storage},o}(),n=function(){function r(t){this.searchStr="",this.renderUpdater=t,this.dataStorage=o.getInstance(),window.addEventListener("unload",this.unloadHandler.bind(this))}return r.prototype.unloadHandler=function(){t.setItem(e,this.dataStorage.getStorage())},r.prototype.searchByProjects=function(){var t=this;return function(){var e=this.value,r=t.dataStorage.search(e);t.renderUpdater(r),t.searchStr=e}},r.prototype.clickProject=function(t){var e=this;return function(){var r=e.dataStorage.get(t.id);r.toggleStatus(),e.dataStorage.replace(r),e.renderUpdater()}},r.prototype.editProject=function(t){var e=this;return function(r){var o=r.target.textContent,n=e.dataStorage.get(t.id);n.changeText(o),e.dataStorage.replace(n)}},r.prototype.createProject=function(){var t=this;return function(){t.dataStorage.add(),t.renderUpdater()}},r.prototype.removeProject=function(t){var e=this;return function(){e.dataStorage.remove(t.id);var r=e.dataStorage.getStorage();e.searchStr&&(r=e.dataStorage.search(e.searchStr)),e.renderUpdater(r)}},r}();(new(function(){function t(){this.controller=new n(this.updateProjectList.bind(this)),this.projectsList=o.getInstance().getStorage(),this.rootEl=document.getElementById("root-holder")}return t.prototype.render=function(){var t=document.createDocumentFragment();t.append(this.createInputNode(),this.createProjectsNode(),this.createNewProjectNode()),this.rootEl.prepend(document.createElement("div")),this.rootEl.children[0].appendChild(t)},t.prototype.updateProjectList=function(t){void 0===t&&(t=this.projectsList),this.projectsList=t,document.querySelector(".project-list__project-wrapper").replaceWith(this.createProjectsNode())},t.prototype.createInputNode=function(){var t=document.createElement("input");return t.className="project-list__search-filed",t.placeholder="Поиск по проектам...",t.autofocus=!0,t.oninput=this.controller.searchByProjects(),t},t.prototype.createProjectsNode=function(){var t=this,e=document.createElement("div");return e.className="project-list__project-wrapper",this.projectsList.forEach((function(r){e.appendChild(t.createProjectNode(r))})),e},t.prototype.createProjectNode=function(t){var e=document.createElement("div");e.className="project-list__project";var r=document.createElement("input");r.type="checkbox",r.className="project-list__project-checkbox",r.checked=t.isDone,r.onclick=this.controller.clickProject(t);var o=document.createElement("span"),n=t.isDone?" project-list__project-value_done":"";o.className="project-list__project-value"+n,o.innerText=t.text,o.contentEditable="true",o.oninput=this.controller.editProject(t);var a=document.createElement("span");return a.className="project-list__remove-project",a.innerText="X",a.title="Удалить проект",a.onclick=this.controller.removeProject(t),e.append(r,o,a),e},t.prototype.createNewProjectNode=function(){var t=document.createElement("div");t.className="project-list__add-project";var e=document.createElement("span");return e.className="project-list__add-project-button",e.innerText="Добавить новый проект",e.onclick=this.controller.createProject(),t.appendChild(e),t},t}())).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Ub0RvLy4vc3JjL2NvbmZpZy9jb25maWcudHMiLCJ3ZWJwYWNrOi8vVG9Eby8uL3NyYy9oZWxwZXJzL0xvY2FsU3RvcmFnZS50cyIsIndlYnBhY2s6Ly9Ub0RvLy4vc3JjL1Byb2plY3RNb2RlbC50cyIsIndlYnBhY2s6Ly9Ub0RvLy4vc3JjL2hlbHBlcnMvY3RyYXRlVWlkLnRzIiwid2VicGFjazovL1RvRG8vLi9zcmMvRGF0YVN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vVG9Eby8uL3NyYy9Db250cm9sbGVyLnRzIiwid2VicGFjazovL1RvRG8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vVG9Eby8uL3NyYy9SZW5kZXJlci50cyJdLCJuYW1lcyI6WyJMb2NhbGVTdG9yYWdlIiwiY29uZmlnIiwidGV4dCIsInRoaXMiLCJpZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImlzRG9uZSIsInRvZ2dsZVN0YXR1cyIsImNoYW5nZVRleHQiLCJ1cGRhdGUiLCJkYXRhIiwic2V0SXRlbSIsImtleSIsInZhbHVlIiwibG9jYWxTdG9yYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldEl0ZW0iLCJwYXJzZSIsInJlbW92ZUl0ZW0iLCJjb250YWlucyIsImNsZWFyIiwic3RvcmFnZSIsInNhdmVkRGF0YSIsImxlbmd0aCIsImZvckVhY2giLCJpdGVtIiwicHVzaCIsIlByb2plY3RNb2RlbCIsImdldEluc3RhbmNlIiwiRGF0YVN0b3JhZ2UiLCJpbnN0YW5jZSIsInNlYXJjaCIsInN0ciIsImZpbHRlciIsInBtIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwiZ2V0IiwiZmluZCIsImFkZCIsInVuc2hpZnQiLCJyZXBsYWNlIiwibWFwIiwicHJvamVjdE1vZGVsIiwicmVtb3ZlIiwiZ2V0U3RvcmFnZSIsInVwZGF0ZXIiLCJzZWFyY2hTdHIiLCJyZW5kZXJVcGRhdGVyIiwiZGF0YVN0b3JhZ2UiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwidW5sb2FkSGFuZGxlciIsImJpbmQiLCJzZWFyY2hCeVByb2plY3RzIiwidGhhdCIsInVwZGF0ZWREYXRhU3RvcmFnZSIsImNsaWNrUHJvamVjdCIsImVkaXRQcm9qZWN0IiwiZSIsInRhcmdldCIsInRleHRDb250ZW50IiwiY3JlYXRlUHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJwcm9qZWN0TGlzdCIsImNvbnRyb2xsZXIiLCJDb250cm9sbGVyIiwidXBkYXRlUHJvamVjdExpc3QiLCJwcm9qZWN0c0xpc3QiLCJyb290RWwiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwicmVuZGVyIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXBwZW5kIiwiY3JlYXRlSW5wdXROb2RlIiwiY3JlYXRlUHJvamVjdHNOb2RlIiwiY3JlYXRlTmV3UHJvamVjdE5vZGUiLCJwcmVwZW5kIiwiY3JlYXRlRWxlbWVudCIsImNoaWxkcmVuIiwiYXBwZW5kQ2hpbGQiLCJkYXRhU291cmNlIiwicXVlcnlTZWxlY3RvciIsInJlcGxhY2VXaXRoIiwiaW5wdXQiLCJjbGFzc05hbWUiLCJwbGFjZWhvbGRlciIsImF1dG9mb2N1cyIsIm9uaW5wdXQiLCJ3cmFwcGVyTm9kZSIsImNyZWF0ZVByb2plY3ROb2RlIiwicHJvamVjdFdyYXBwZXJOb2RlIiwicHJvamVjdENoZWNrYm94Tm9kZSIsInR5cGUiLCJjaGVja2VkIiwib25jbGljayIsInByb2plY3RWYWx1ZU5vZGUiLCJwcm9qZWN0VmFsdWVDc3NNb2RpZmllciIsImlubmVyVGV4dCIsImNvbnRlbnRFZGl0YWJsZSIsInByb2plY3RSZW1vdmVOb2RlIiwidGl0bGUiLCJuZXdQcm9qZWN0Tm9kZSIsIm5ld1Byb2plY3RCdXR0b25Ob2RlIl0sIm1hcHBpbmdzIjoibUJBQU8sSUNBVUEsRURBSkMsRUFFUyxjRUF0QixhQUtJLFdBQVlDLEdBQ1JDLEtBQUtDLEdDUExDLEtBQUtDLFNBQVNDLFNBQVMsSUFBSUMsVUFBVSxFQUFH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QUFjLE9BQzlDd0IsRUFBZWpCLFVBQVksNEJBRTNCLElBQU1rQixFQUF1Qm5DLFNBQVNVLGNBQWMsUUFPcEQsT0FOQXlCLEVBQXFCbEIsVUFBWSxtQ0FDakNrQixFQUFxQkwsVUFBWSx3QkFDakNLLEVBQXFCUixRQUFVbEcsS0FBS2tFLFdBQVdILGdCQUUvQzBDLEVBQWV0QixZQUFZdUIsR0FFcEJELEdBRWYsRUFoR0EsS0RGU2hDLFUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICAgIGhvbGRlcklkOiAncm9vdC1ob2xkZXInLFxyXG4gICAgbG9jYWxlU3RvcmFnZUtleTogJ3RvVG9TdG9yYWdlJ1xyXG59O1xyXG4iLCJleHBvcnQgbmFtZXNwYWNlIExvY2FsZVN0b3JhZ2Uge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHtcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcclxuXHR9XHJcblxyXG5cdGV4cG9ydCBmdW5jdGlvbiBnZXRJdGVtPFQgPSBhbnk+KGtleTogc3RyaW5nKTogVCB7XHJcblx0XHRyZXR1cm4gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKSBhcyBUO1xyXG5cdH1cclxuXHJcblx0ZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmNvbnRhaW5zKGtleSkpIHtcclxuXHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGV4cG9ydCBmdW5jdGlvbiBjb250YWlucyhrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuICEhbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuXHR9XHJcblxyXG5cdGV4cG9ydCBmdW5jdGlvbiBjbGVhcigpOiB2b2lkIHtcclxuXHRcdGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgeyBjcmVhdGVVaWQgfSBmcm9tIFwiLi9oZWxwZXJzL2N0cmF0ZVVpZFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RNb2RlbCB7XHJcbiAgICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaXNEb25lOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRleHQ/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmlkID0gY3JlYXRlVWlkKCk7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dCB8fCAn0J3QvtCy0YvQuSDQv9GA0L7QtdC60YInO1xyXG4gICAgICAgIHRoaXMuaXNEb25lID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvZ2dsZVN0YXR1cygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmlzRG9uZSA9ICF0aGlzLmlzRG9uZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2hhbmdlVGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGUoZGF0YTogUHJvamVjdFBsYWluRGF0YSk6IFByb2plY3RNb2RlbCB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGRhdGEuaWQ7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gZGF0YS50ZXh0O1xyXG4gICAgICAgIHRoaXMuaXNEb25lID0gZGF0YS5pc0RvbmU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb2plY3RQbGFpbkRhdGEge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIHRleHQ6IHN0cmluZztcclxuICAgIGlzRG9uZTogYm9vbGVhbjtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlVWlkKCk6IHN0cmluZyB7XHJcblx0cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSkgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3RNb2RlbCwgUHJvamVjdFBsYWluRGF0YSB9IGZyb20gJy4vUHJvamVjdE1vZGVsJztcclxuaW1wb3J0IHsgTG9jYWxlU3RvcmFnZSB9IGZyb20gJy4vaGVscGVycy9Mb2NhbFN0b3JhZ2UnO1xyXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZy9jb25maWcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERhdGFTdG9yYWdlIHtcclxuICAgIHByaXZhdGUgc3RvcmFnZTogQXJyYXk8UHJvamVjdE1vZGVsPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERhdGFTdG9yYWdlO1xyXG5cclxuXHRzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcblx0XHRpZiAoIURhdGFTdG9yYWdlLmluc3RhbmNlKSB7XHJcblx0XHRcdERhdGFTdG9yYWdlLmluc3RhbmNlID0gbmV3IERhdGFTdG9yYWdlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIERhdGFTdG9yYWdlLmluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgXHJcblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBMb2NhbGVTdG9yYWdlLmdldEl0ZW08QXJyYXk8UHJvamVjdFBsYWluRGF0YT4+KGNvbmZpZy5sb2NhbGVTdG9yYWdlS2V5KTtcclxuICAgICAgICBpZiAoISFzYXZlZERhdGEgJiYgISFzYXZlZERhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNhdmVkRGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnB1c2gobmV3IFByb2plY3RNb2RlbCgpLnVwZGF0ZShpdGVtKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHR9XHJcblxyXG4gICAgcHVibGljIHNlYXJjaChzdHI6IHN0cmluZyk6IEFycmF5PFByb2plY3RNb2RlbD4ge1xyXG4gICAgICAgIGlmICghc3RyLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlLmZpbHRlcihwbSA9PiBwbS50ZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdHIudG9Mb3dlckNhc2UoKSkgPj0gMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldChpZDogc3RyaW5nKTogUHJvamVjdE1vZGVsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlLmZpbmQocG0gPT4gcG0uaWQgPT09IGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkKHRleHQ/OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHBtID0gbmV3IFByb2plY3RNb2RlbCh0ZXh0KTtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UudW5zaGlmdChwbSk7XHJcbiAgICAgICAgcmV0dXJuIHBtLmlkO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXBsYWNlKHBtOiBQcm9qZWN0TW9kZWwpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UubWFwKHByb2plY3RNb2RlbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwcm9qZWN0TW9kZWwuaWQgPT09IHBtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcG07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByb2plY3RNb2RlbDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlKGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLnN0b3JhZ2UuZmlsdGVyKHBtID0+IHBtLmlkICE9PSBpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFN0b3JhZ2UoKTogQXJyYXk8UHJvamVjdE1vZGVsPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBEYXRhU3RvcmFnZSB9IGZyb20gXCIuL0RhdGFTdG9yYWdlXCI7XHJcbmltcG9ydCB7IFByb2plY3RNb2RlbCB9IGZyb20gXCIuL1Byb2plY3RNb2RlbFwiO1xyXG5pbXBvcnQgeyBMb2NhbGVTdG9yYWdlIH0gZnJvbSBcIi4vaGVscGVycy9Mb2NhbFN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSBcIi4vY29uZmlnL2NvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRyb2xsZXIge1xyXG4gICAgcHJpdmF0ZSBkYXRhU3RvcmFnZTogRGF0YVN0b3JhZ2U7XHJcbiAgICBwcml2YXRlIHJlbmRlclVwZGF0ZXI6IEZ1bmN0aW9uO1xyXG4gICAgcHJpdmF0ZSBzZWFyY2hTdHI6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZXI6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJVcGRhdGVyID0gdXBkYXRlcjtcclxuICAgICAgICB0aGlzLmRhdGFTdG9yYWdlID0gRGF0YVN0b3JhZ2UuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMudW5sb2FkSGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVubG9hZEhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgTG9jYWxlU3RvcmFnZS5zZXRJdGVtKGNvbmZpZy5sb2NhbGVTdG9yYWdlS2V5LCB0aGlzLmRhdGFTdG9yYWdlLmdldFN0b3JhZ2UoKSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VhcmNoQnlQcm9qZWN0cygpOiAoKSA9PiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaFN0ciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWREYXRhU3RvcmFnZSA9IHRoYXQuZGF0YVN0b3JhZ2Uuc2VhcmNoKHNlYXJjaFN0cik7XHJcbiAgICAgICAgICAgIHRoYXQucmVuZGVyVXBkYXRlcih1cGRhdGVkRGF0YVN0b3JhZ2UpO1xyXG4gICAgICAgICAgICB0aGF0LnNlYXJjaFN0ciA9IHNlYXJjaFN0cjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsaWNrUHJvamVjdChwbTogUHJvamVjdE1vZGVsKTogKCkgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdE1vZGVsID0gdGhpcy5kYXRhU3RvcmFnZS5nZXQocG0uaWQpO1xyXG4gICAgICAgICAgICBwcm9qZWN0TW9kZWwudG9nZ2xlU3RhdHVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVN0b3JhZ2UucmVwbGFjZShwcm9qZWN0TW9kZWwpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclVwZGF0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVkaXRQcm9qZWN0KHBtOiBQcm9qZWN0TW9kZWwpOiAoZTogRXZlbnQpID0+IHZvaWQge1xyXG4gICAgICAgIHJldHVybiAoZTogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IChlLnRhcmdldCBhcyBhbnkpLnRleHRDb250ZW50O1xyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0TW9kZWwgPSB0aGlzLmRhdGFTdG9yYWdlLmdldChwbS5pZCk7XHJcbiAgICAgICAgICAgIHByb2plY3RNb2RlbC5jaGFuZ2VUZXh0KHRleHQpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTdG9yYWdlLnJlcGxhY2UocHJvamVjdE1vZGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVByb2plY3QoKTogKCkgPT4gdm9pZCB7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU3RvcmFnZS5hZGQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVcGRhdGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVQcm9qZWN0KHBtOiBQcm9qZWN0TW9kZWwpOiAoKSA9PiB2b2lkIHtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTdG9yYWdlLnJlbW92ZShwbS5pZCk7XHJcbiAgICAgICAgICAgIGxldCBwcm9qZWN0TGlzdCA9IHRoaXMuZGF0YVN0b3JhZ2UuZ2V0U3RvcmFnZSgpO1xyXG4gICAgICAgICAgICBpZiAoISF0aGlzLnNlYXJjaFN0cikge1xyXG4gICAgICAgICAgICAgICAgcHJvamVjdExpc3QgPSB0aGlzLmRhdGFTdG9yYWdlLnNlYXJjaCh0aGlzLnNlYXJjaFN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVcGRhdGVyKHByb2plY3RMaXN0KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSBcIi4vUmVuZGVyZXJcIjtcclxuXHJcbmNvbnN0IHJlbmRlcmVyID0gbmV3IFJlbmRlcmVyKCk7XHJcbnJlbmRlcmVyLnJlbmRlcigpO1xyXG4iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi9jb25maWcvY29uZmlnXCI7XG5pbXBvcnQgeyBQcm9qZWN0TW9kZWwgfSBmcm9tIFwiLi9Qcm9qZWN0TW9kZWxcIjtcbmltcG9ydCB7IERhdGFTdG9yYWdlIH0gZnJvbSBcIi4vRGF0YVN0b3JhZ2VcIjtcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tIFwiLi9Db250cm9sbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSBjb250cm9sbGVyOiBDb250cm9sbGVyO1xuICAgIHByaXZhdGUgcHJvamVjdHNMaXN0OiBBcnJheTxQcm9qZWN0TW9kZWw+O1xuICAgIHByaXZhdGUgcm9vdEVsOiBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcih0aGlzLnVwZGF0ZVByb2plY3RMaXN0LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnByb2plY3RzTGlzdCA9IERhdGFTdG9yYWdlLmdldEluc3RhbmNlKCkuZ2V0U3RvcmFnZSgpO1xuICAgICAgICB0aGlzLnJvb3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5ob2xkZXJJZCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZChcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlSW5wdXROb2RlKCksXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVByb2plY3RzTm9kZSgpLFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdQcm9qZWN0Tm9kZSgpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yb290RWwucHJlcGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIHRoaXMucm9vdEVsLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVByb2plY3RMaXN0KGRhdGFTb3VyY2U6IEFycmF5PFByb2plY3RNb2RlbD4gPSB0aGlzLnByb2plY3RzTGlzdCkge1xuICAgICAgICB0aGlzLnByb2plY3RzTGlzdCA9IGRhdGFTb3VyY2U7XG5cbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0X19wcm9qZWN0LXdyYXBwZXInKTtcbiAgICAgICAgZWwucmVwbGFjZVdpdGgodGhpcy5jcmVhdGVQcm9qZWN0c05vZGUoKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVJbnB1dE5vZGUoKTogTm9kZSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgaW5wdXQuY2xhc3NOYW1lID0gJ3Byb2plY3QtbGlzdF9fc2VhcmNoLWZpbGVkJztcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSAn0J/QvtC40YHQuiDQv9C+INC/0YDQvtC10LrRgtCw0LwuLi4nO1xuICAgICAgICBpbnB1dC5hdXRvZm9jdXMgPSB0cnVlO1xuICAgICAgICBpbnB1dC5vbmlucHV0ID0gdGhpcy5jb250cm9sbGVyLnNlYXJjaEJ5UHJvamVjdHMoKTtcblxuICAgICAgICByZXR1cm4gaW5wdXQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQcm9qZWN0c05vZGUoKTogTm9kZSB7XG4gICAgICAgIGNvbnN0IHdyYXBwZXJOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHdyYXBwZXJOb2RlLmNsYXNzTmFtZSA9ICdwcm9qZWN0LWxpc3RfX3Byb2plY3Qtd3JhcHBlcic7XG5cbiAgICAgICAgdGhpcy5wcm9qZWN0c0xpc3QuZm9yRWFjaChwbSA9PiB7XG4gICAgICAgICAgICB3cmFwcGVyTm9kZS5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVByb2plY3ROb2RlKHBtKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB3cmFwcGVyTm9kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVByb2plY3ROb2RlKHBtOiBQcm9qZWN0TW9kZWwpOiBOb2RlIHtcbiAgICAgICAgY29uc3QgcHJvamVjdFdyYXBwZXJOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHByb2plY3RXcmFwcGVyTm9kZS5jbGFzc05hbWUgPSAncHJvamVjdC1saXN0X19wcm9qZWN0JztcblxuICAgICAgICBjb25zdCBwcm9qZWN0Q2hlY2tib3hOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgcHJvamVjdENoZWNrYm94Tm9kZS50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgcHJvamVjdENoZWNrYm94Tm9kZS5jbGFzc05hbWUgPSAncHJvamVjdC1saXN0X19wcm9qZWN0LWNoZWNrYm94JztcbiAgICAgICAgcHJvamVjdENoZWNrYm94Tm9kZS5jaGVja2VkID0gcG0uaXNEb25lO1xuICAgICAgICBwcm9qZWN0Q2hlY2tib3hOb2RlLm9uY2xpY2sgPSB0aGlzLmNvbnRyb2xsZXIuY2xpY2tQcm9qZWN0KHBtKTtcblxuICAgICAgICBjb25zdCBwcm9qZWN0VmFsdWVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjb25zdCBwcm9qZWN0VmFsdWVDc3NNb2RpZmllciA9IHBtLmlzRG9uZSA/ICcgcHJvamVjdC1saXN0X19wcm9qZWN0LXZhbHVlX2RvbmUnIDogJydcbiAgICAgICAgcHJvamVjdFZhbHVlTm9kZS5jbGFzc05hbWUgPSAncHJvamVjdC1saXN0X19wcm9qZWN0LXZhbHVlJyArIHByb2plY3RWYWx1ZUNzc01vZGlmaWVyO1xuICAgICAgICBwcm9qZWN0VmFsdWVOb2RlLmlubmVyVGV4dCA9IHBtLnRleHQ7XG4gICAgICAgIHByb2plY3RWYWx1ZU5vZGUuY29udGVudEVkaXRhYmxlID0gJ3RydWUnO1xuICAgICAgICBwcm9qZWN0VmFsdWVOb2RlLm9uaW5wdXQgPSB0aGlzLmNvbnRyb2xsZXIuZWRpdFByb2plY3QocG0pO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3RSZW1vdmVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBwcm9qZWN0UmVtb3ZlTm9kZS5jbGFzc05hbWUgPSAncHJvamVjdC1saXN0X19yZW1vdmUtcHJvamVjdCc7XG4gICAgICAgIHByb2plY3RSZW1vdmVOb2RlLmlubmVyVGV4dCA9ICdYJztcbiAgICAgICAgcHJvamVjdFJlbW92ZU5vZGUudGl0bGUgPSAn0KPQtNCw0LvQuNGC0Ywg0L/RgNC+0LXQutGCJztcbiAgICAgICAgcHJvamVjdFJlbW92ZU5vZGUub25jbGljayA9IHRoaXMuY29udHJvbGxlci5yZW1vdmVQcm9qZWN0KHBtKTtcblxuICAgICAgICBwcm9qZWN0V3JhcHBlck5vZGUuYXBwZW5kKFxuICAgICAgICAgICAgcHJvamVjdENoZWNrYm94Tm9kZSxcbiAgICAgICAgICAgIHByb2plY3RWYWx1ZU5vZGUsXG4gICAgICAgICAgICBwcm9qZWN0UmVtb3ZlTm9kZVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBwcm9qZWN0V3JhcHBlck5vZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVOZXdQcm9qZWN0Tm9kZSgpOiBOb2RlIHtcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdE5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbmV3UHJvamVjdE5vZGUuY2xhc3NOYW1lID0gJ3Byb2plY3QtbGlzdF9fYWRkLXByb2plY3QnO1xuXG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3RCdXR0b25Ob2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBuZXdQcm9qZWN0QnV0dG9uTm9kZS5jbGFzc05hbWUgPSAncHJvamVjdC1saXN0X19hZGQtcHJvamVjdC1idXR0b24nO1xuICAgICAgICBuZXdQcm9qZWN0QnV0dG9uTm9kZS5pbm5lclRleHQgPSAn0JTQvtCx0LDQstC40YLRjCDQvdC+0LLRi9C5INC/0YDQvtC10LrRgic7XG4gICAgICAgIG5ld1Byb2plY3RCdXR0b25Ob2RlLm9uY2xpY2sgPSB0aGlzLmNvbnRyb2xsZXIuY3JlYXRlUHJvamVjdCgpO1xuXG4gICAgICAgIG5ld1Byb2plY3ROb2RlLmFwcGVuZENoaWxkKG5ld1Byb2plY3RCdXR0b25Ob2RlKTtcblxuICAgICAgICByZXR1cm4gbmV3UHJvamVjdE5vZGU7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==